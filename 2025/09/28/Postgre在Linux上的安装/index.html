<!DOCTYPE html>


<html lang="zh-hans">
  

    <head>
      <meta charset="utf-8" />
        
      <meta name="description" content="24stage Blog" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>Postgreåœ¨Linuxä¸Šçš„å®‰è£… |  24stage</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/smile.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-Postgreåœ¨Linuxä¸Šçš„å®‰è£…"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Postgreåœ¨Linuxä¸Šçš„å®‰è£…
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2025/09/28/Postgre%E5%9C%A8Linux%E4%B8%8A%E7%9A%84%E5%AE%89%E8%A3%85/" class="article-date">
  <time datetime="2025-09-28T14:57:48.000Z" itemprop="datePublished">2025-09-28</time>
</a>   
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> Word count:</span>
            <span class="post-count">2.4k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> Reading timeâ‰ˆ</span>
            <span class="post-count">9 min</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="åœ¨-Ubuntu-ä¸Šä»æºç ä½¿ç”¨-Autoconf-Make-å®‰è£…-PostgreSQL-16-8"><a href="#åœ¨-Ubuntu-ä¸Šä»æºç ä½¿ç”¨-Autoconf-Make-å®‰è£…-PostgreSQL-16-8" class="headerlink" title="åœ¨ Ubuntu ä¸Šä»æºç ä½¿ç”¨ Autoconf + Make å®‰è£… PostgreSQL 16.8"></a>åœ¨ Ubuntu ä¸Šä»æºç ä½¿ç”¨ Autoconf + Make å®‰è£… PostgreSQL 16.8</h1><p>æœ¬æ–‡æ¡£è®°å½•äº†åœ¨ Ubuntu ä¸Šç”¨ Autoconf + Make ç¼–è¯‘å®‰è£… PostgreSQL (ç‰ˆæœ¬ 16.8) çš„å®Œæ•´æ­¥éª¤</p>
<hr>
<h2 id="å‰æè¯´æ˜"><a href="#å‰æè¯´æ˜" class="headerlink" title="å‰æè¯´æ˜"></a>å‰æè¯´æ˜</h2><ul>
<li>æ“ä½œç³»ç»Ÿï¼šUbuntu</li>
<li>å…·å¤‡ sudo æƒé™  </li>
<li>å­¦ä¹ &#x2F;å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œéç”Ÿäº§ç¯å¢ƒ</li>
</ul>
<hr>
<h2 id="æ­¥éª¤ä¸€ï¼šå®‰è£…ç¼–è¯‘ä¾èµ–"><a href="#æ­¥éª¤ä¸€ï¼šå®‰è£…ç¼–è¯‘ä¾èµ–" class="headerlink" title="æ­¥éª¤ä¸€ï¼šå®‰è£…ç¼–è¯‘ä¾èµ–"></a>æ­¥éª¤ä¸€ï¼šå®‰è£…ç¼–è¯‘ä¾èµ–</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt upgrade -y</span><br><span class="line"></span><br><span class="line">sudo apt install -y build-essential libreadline-dev zlib1g-dev \</span><br><span class="line">    flex bison libxml2-dev libxslt1-dev libssl-dev wget pkg-config</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜ï¼š</p>
<ul>
<li><code>build-essential</code>ï¼šåŒ…æ‹¬ gccã€make ç­‰åŸºç¡€ç¼–è¯‘å·¥å…·  </li>
<li><code>libreadline-dev</code>ï¼šå‘½ä»¤è¡Œå†å²ã€è¡Œç¼–è¾‘æ”¯æŒ  </li>
<li><code>zlib1g-dev</code>ï¼šå‹ç¼©æ”¯æŒ  </li>
<li><code>flex</code>ã€<code>bison</code>ï¼šè¯­æ³• &#x2F; è¯æ³•åˆ†æå·¥å…·  </li>
<li><code>libxml2-dev</code>ã€<code>libxslt1-dev</code>ï¼šXML &#x2F; XSLT æ”¯æŒ  </li>
<li><code>libssl-dev</code>ï¼šSSL &#x2F; åŠ å¯†æ”¯æŒ  </li>
<li><code>wget</code>ï¼šä¸‹è½½æºç åŒ…  </li>
<li><code>pkg-config</code>ï¼šè¾…åŠ© <code>configure</code> è„šæœ¬æŸ¥æ‰¾åº“åŠå…¶è·¯å¾„ä¿¡æ¯</li>
</ul>
<hr>
<h2 id="æ­¥éª¤äºŒï¼šä¸‹è½½å¹¶è§£å‹-PostgreSQL-æºç "><a href="#æ­¥éª¤äºŒï¼šä¸‹è½½å¹¶è§£å‹-PostgreSQL-æºç " class="headerlink" title="æ­¥éª¤äºŒï¼šä¸‹è½½å¹¶è§£å‹ PostgreSQL æºç "></a>æ­¥éª¤äºŒï¼šä¸‹è½½å¹¶è§£å‹ PostgreSQL æºç </h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/local/src</span><br><span class="line">sudo wget https://ftp.postgresql.org/pub/source/v16.8/postgresql-16.8.tar.gz</span><br><span class="line">sudo tar -xzf postgresql-16.8.tar.gz</span><br><span class="line"><span class="built_in">cd</span> postgresql-16.8</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶ä½ è¿›å…¥æºç æ ¹ç›®å½• <code>postgresql-16.8</code>ã€‚</p>
<hr>
<h2 id="æ­¥éª¤ä¸‰ï¼šè¿è¡Œ-configure-è„šæœ¬ï¼Œé…ç½®æ„å»ºé€‰é¡¹"><a href="#æ­¥éª¤ä¸‰ï¼šè¿è¡Œ-configure-è„šæœ¬ï¼Œé…ç½®æ„å»ºé€‰é¡¹" class="headerlink" title="æ­¥éª¤ä¸‰ï¼šè¿è¡Œ configure è„šæœ¬ï¼Œé…ç½®æ„å»ºé€‰é¡¹"></a>æ­¥éª¤ä¸‰ï¼šè¿è¡Œ <code>configure</code> è„šæœ¬ï¼Œé…ç½®æ„å»ºé€‰é¡¹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/local/pgsql \</span><br><span class="line">            --with-openssl \</span><br><span class="line">            --with-libxml \</span><br><span class="line">            --with-libxslt</span><br></pre></td></tr></table></figure>

<p>å„é€‰é¡¹è¯´æ˜ï¼š</p>
<ul>
<li><code>--prefix=/usr/local/pgsql</code>ï¼šæŒ‡å®š PostgreSQL æœ€ç»ˆå®‰è£…ç›®å½•  </li>
<li><code>--with-openssl</code>ï¼šå¯ç”¨ SSL æ”¯æŒ  </li>
<li><code>--with-libxml</code> &#x2F; <code>--with-libxslt</code>ï¼šå¯ç”¨ XML &#x2F; XSLT æ”¯æŒ</li>
</ul>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šå¦‚æœç³»ç»Ÿä¸­å°šæœªå®‰è£… ICUï¼ˆå›½é™…åŒ– &#x2F; Unicode æ”¯æŒåº“ï¼‰ï¼Œ<code>configure</code> å¯èƒ½æç¤º â€œICU library not foundâ€ é”™è¯¯ã€‚æ­¤æ—¶ä½ éœ€è¦å…ˆå®‰è£… ICU çš„å¼€å‘åŒ…ï¼ˆå¦‚ <code>libicu-dev</code>ï¼‰ã€‚  </p>
</blockquote>
<p>è‹¥æ‰§è¡Œ <code>configure</code> æ—¶å‡ºç° â€œPermission deniedâ€ æˆ–ç±»ä¼¼é”™è¯¯ï¼Œå¯è€ƒè™‘ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>sudo ./configure â€¦</code>  </li>
<li>ä¿®æ”¹æºç ç›®å½•çš„å±ä¸» &#x2F; æƒé™ï¼Œä½¿å½“å‰ç”¨æˆ·æ‹¥æœ‰å†™æƒé™  </li>
<li>å°†æºç å¤åˆ¶ &#x2F; ç§»åŠ¨åˆ°å½“å‰ç”¨æˆ·æœ‰å†™æƒé™çš„ç›®å½•ä¸‹æ“ä½œ</li>
</ul>
<hr>
<h2 id="æ­¥éª¤å››ï¼šç¼–è¯‘ã€æµ‹è¯•ä¸å®‰è£…"><a href="#æ­¥éª¤å››ï¼šç¼–è¯‘ã€æµ‹è¯•ä¸å®‰è£…" class="headerlink" title="æ­¥éª¤å››ï¼šç¼–è¯‘ã€æµ‹è¯•ä¸å®‰è£…"></a>æ­¥éª¤å››ï¼šç¼–è¯‘ã€æµ‹è¯•ä¸å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">make</span><br><span class="line">make check      <span class="comment"># å¯é€‰ï¼Œè¿è¡Œå›å½’æµ‹è¯•ä»¥éªŒè¯åŠŸèƒ½æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜ï¼š</p>
<ul>
<li><code>make</code>ï¼šç¼–è¯‘ PostgreSQL  </li>
<li><code>make check</code>ï¼šè¿è¡Œ PostgreSQL è‡ªå¸¦çš„æµ‹è¯•å¥—ä»¶ï¼ˆæ¨èæ‰§è¡Œï¼Œä»¥ä¾¿æå‰å‘ç°é—®é¢˜ï¼‰  </li>
<li><code>sudo make install</code>ï¼šå°†ç¼–è¯‘æ‰€å¾—çš„ç¨‹åºã€åº“ã€å¤´æ–‡ä»¶ç­‰å®‰è£…åˆ° <code>--prefix</code> æŒ‡å®šçš„ç›®å½•</li>
</ul>
<p>å¦‚æœéœ€è¦å®‰è£…é¢å¤–æ¨¡å—ã€æ–‡æ¡£ç­‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤å¦‚ <code>make world</code> &#x2F; <code>make world-bin</code> &#x2F; <code>make install-world</code> ç­‰ã€‚</p>
<hr>
<h2 id="æ­¥éª¤äº”ï¼šåˆå§‹åŒ–æ•°æ®åº“é›†ç¾¤"><a href="#æ­¥éª¤äº”ï¼šåˆå§‹åŒ–æ•°æ®åº“é›†ç¾¤" class="headerlink" title="æ­¥éª¤äº”ï¼šåˆå§‹åŒ–æ•°æ®åº“é›†ç¾¤"></a>æ­¥éª¤äº”ï¼šåˆå§‹åŒ–æ•°æ®åº“é›†ç¾¤</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">mkdir</span> -p /usr/local/pgsql/data</span><br><span class="line">sudo <span class="built_in">chown</span> wqstage:wqstage /usr/local/pgsql/data</span><br><span class="line"></span><br><span class="line">/usr/local/pgsql/bin/initdb -D /usr/local/pgsql/data</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸€æ­¥ä¼šåˆ›å»ºç³»ç»Ÿæ‰€éœ€ç›®å½•ç»“æ„ã€é»˜è®¤æ•°æ®åº“ã€ç³»ç»Ÿè¡¨æ ¼ã€é»˜è®¤é…ç½®æ–‡ä»¶ï¼ˆå¦‚ <code>postgresql.conf</code>ã€<code>pg_hba.conf</code> ç­‰ï¼‰ã€‚</p>
<hr>
<h2 id="æ­¥éª¤å…­ï¼šå¯åŠ¨-PostgreSQL-æœåŠ¡å™¨è¿›ç¨‹"><a href="#æ­¥éª¤å…­ï¼šå¯åŠ¨-PostgreSQL-æœåŠ¡å™¨è¿›ç¨‹" class="headerlink" title="æ­¥éª¤å…­ï¼šå¯åŠ¨ PostgreSQL æœåŠ¡å™¨è¿›ç¨‹"></a>æ­¥éª¤å…­ï¼šå¯åŠ¨ PostgreSQL æœåŠ¡å™¨è¿›ç¨‹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/local/pgsql/data</span><br><span class="line">/usr/local/pgsql/bin/pg_ctl -D /usr/local/pgsql/data -l /usr/local/pgsql/data/logfile start</span><br></pre></td></tr></table></figure>

<ul>
<li><code>pg_ctl</code> æ˜¯ PostgreSQL çš„ç®¡ç†å·¥å…·ï¼Œç”¨æ¥å¯åŠ¨ã€åœæ­¢ã€é‡å¯æ•°æ®åº“æœåŠ¡ã€‚</li>
<li><code>-D</code>ï¼šæ•°æ®ç›®å½•  </li>
<li><code>-l logfile</code>ï¼šæ—¥å¿—æ–‡ä»¶è·¯å¾„</li>
</ul>
<p>å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ç¡®è®¤æ˜¯å¦æˆåŠŸå¯åŠ¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep postgres</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="æ­¥éª¤ä¸ƒï¼šé…ç½®ç¯å¢ƒå˜é‡"><a href="#æ­¥éª¤ä¸ƒï¼šé…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="æ­¥éª¤ä¸ƒï¼šé…ç½®ç¯å¢ƒå˜é‡"></a>æ­¥éª¤ä¸ƒï¼šé…ç½®ç¯å¢ƒå˜é‡</h2><p>å°† PostgreSQL çš„å¯æ‰§è¡Œè·¯å¾„åŠ å…¥ <code>PATH</code>ï¼Œå¹¶è®¾ç½® <code>PGDATA</code> ç¯å¢ƒå˜é‡ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PATH=/usr/local/pgsql/bin:$PATH&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PGDATA=/usr/local/pgsql/data&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä½ å°±å¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯ä½¿ç”¨ <code>psql</code>ã€<code>pg_ctl</code> ç­‰å‘½ä»¤ï¼Œè€Œæ— éœ€å†™å®Œæ•´è·¯å¾„ã€‚<br>ä¾‹å¦‚ä»¥åå¯åŠ¨æ•°æ®åº“æœåŠ¡æ—¶å¯ä»¥ç›´æ¥è¿™æ ·å†™ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pg_ctl -l /usr/local/pgsql/data/logfile start</span><br></pre></td></tr></table></figure>

<p><strong>å…³é—­PostgreSQLæœåŠ¡è¿›ç¨‹</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pg_ctl -D /usr/local/pgsql/data stop</span><br></pre></td></tr></table></figure>

<p>æ¨¡å¼ï¼š</p>
<ul>
<li><code>smart</code>ï¼šç­‰æ‰€æœ‰è¿æ¥æ–­å¼€åå…³åº“ï¼ˆé»˜è®¤ï¼‰ã€‚  </li>
<li><code>fast</code>ï¼šç«‹åˆ»æ–­å¼€è¿æ¥å¹¶åšæ£€æŸ¥ç‚¹ï¼ˆæ¨èï¼‰ã€‚  </li>
<li><code>immediate</code>ï¼šç´§æ€¥åœæ­¢ï¼ˆç±»ä¼¼ killï¼‰ã€‚</li>
</ul>
<hr>
<h2 id="æ­¥éª¤å…«ï¼šåˆ›å»ºã€è®¿é—®æ•°æ®åº“ï¼Œç”¨å®¢æˆ·ç«¯-psql-è¿æ¥æ•°æ®åº“ï¼Œè¿›å…¥äº¤äº’å¼-SQL-å‘½ä»¤è¡Œ"><a href="#æ­¥éª¤å…«ï¼šåˆ›å»ºã€è®¿é—®æ•°æ®åº“ï¼Œç”¨å®¢æˆ·ç«¯-psql-è¿æ¥æ•°æ®åº“ï¼Œè¿›å…¥äº¤äº’å¼-SQL-å‘½ä»¤è¡Œ" class="headerlink" title="æ­¥éª¤å…«ï¼šåˆ›å»ºã€è®¿é—®æ•°æ®åº“ï¼Œç”¨å®¢æˆ·ç«¯ psql è¿æ¥æ•°æ®åº“ï¼Œè¿›å…¥äº¤äº’å¼ SQL å‘½ä»¤è¡Œ"></a>æ­¥éª¤å…«ï¼šåˆ›å»ºã€è®¿é—®æ•°æ®åº“ï¼Œç”¨å®¢æˆ·ç«¯ psql è¿æ¥æ•°æ®åº“ï¼Œè¿›å…¥äº¤äº’å¼ SQL å‘½ä»¤è¡Œ</h2><p>é¦–å…ˆæ¥åˆ›å»ºä¸€ä¸ªæ•°æ®åº“</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">createdb mydb</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä¸äº§ç”Ÿä»»ä½•å“åº”åˆ™è¡¨ç¤ºè¯¥æ­¥éª¤æˆåŠŸã€‚</p>
<p><strong>ä¸€æ—¦ä½ åˆ›å»ºäº†æ•°æ®åº“ï¼Œä½ å°±å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®å®ƒï¼š</strong></p>
<ul>
<li>è¿è¡ŒPostgreSQLçš„äº¤äº’å¼ç»ˆç«¯ç¨‹åºï¼Œå®ƒè¢«ç§°ä¸ºpsqlï¼Œ å®ƒå…è®¸ä½ äº¤äº’åœ°è¾“å…¥ã€ç¼–è¾‘å’Œæ‰§è¡ŒSQLå‘½ä»¤ã€‚</li>
<li>ä½¿ç”¨ä¸€ç§å·²æœ‰çš„å›¾å½¢åŒ–å‰ç«¯å·¥å…·ï¼Œæ¯”å¦‚pgAdminæˆ–è€…å¸¦ODBCæˆ–JDBCæ”¯æŒçš„åŠå…¬å¥—ä»¶æ¥åˆ›å»ºå’Œç®¡ç†æ•°æ®åº“ã€‚</li>
<li>ä½¿ç”¨å¤šç§ç»‘å®šå‘è¡Œçš„è¯­è¨€ä¸­çš„ä¸€ç§å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„åº”ç”¨ã€‚</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">psql -d mydb</span><br></pre></td></tr></table></figure>
<p>åœ¨psqlä¸­ï¼Œä½ å°†çœ‹åˆ°ä¸‹é¢çš„æ¬¢è¿ä¿¡æ¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">psql (16.8)</span><br><span class="line">Type <span class="string">&quot;help&quot;</span> <span class="keyword">for</span> <span class="built_in">help</span>.</span><br><span class="line"></span><br><span class="line">mydb=&gt;</span><br></pre></td></tr></table></figure>
<p>æœ€åä¸€è¡Œä¹Ÿå¯èƒ½æ˜¯ï¼šmydb&#x3D;#  ,è¿™ä¸ªæç¤ºç¬¦æ„å‘³ç€ä½ æ˜¯æ•°æ®åº“è¶…çº§ç”¨æˆ·ï¼Œæœ€å¯èƒ½å‡ºç°åœ¨ä½ è‡ªå·±å®‰è£…äº† PostgreSQLå®ä¾‹çš„æƒ…å†µä¸‹ã€‚ ä½œä¸ºè¶…çº§ç”¨æˆ·æ„å‘³ç€ä½ ä¸å—è®¿é—®æ§åˆ¶çš„é™åˆ¶ã€‚ </p>
<p>è¿™ä¸ªæ—¶å€™ä½ å°±å¯ä»¥æ•²å…¥ SQLæŸ¥è¯¢åœ¨æ­¤<code>psql</code>ç»´æŠ¤çš„å·¥ä½œåŒºä¸­ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> version();</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> dbauser <span class="keyword">WITH</span> PASSWORD <span class="string">&#x27;dbapassword&#x27;</span>;</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE dba_demo OWNER dbauser;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> DATABASE dba_demo <span class="keyword">TO</span> dbauser;</span><br><span class="line">\q</span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨-systemd-ç®¡ç†-PostgreSQL"><a href="#ä½¿ç”¨-systemd-ç®¡ç†-PostgreSQL" class="headerlink" title="ä½¿ç”¨ systemd ç®¡ç† PostgreSQL"></a>ä½¿ç”¨ systemd ç®¡ç† PostgreSQL</h2><p>systemd æ˜¯ Linux ç³»ç»Ÿä¸­æœ€å¸¸ç”¨çš„ ç³»ç»Ÿä¸æœåŠ¡ç®¡ç†å™¨ï¼ˆSystem and Service Managerï¼‰ã€‚<br>å®ƒè´Ÿè´£ï¼š</p>
<ul>
<li><p>åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶åˆå§‹åŒ–å„ä¸ªæœåŠ¡ï¼ˆåŒ…æ‹¬æ•°æ®åº“ã€ç½‘ç»œã€æ—¥å¿—ç­‰ï¼‰ï¼›</p>
</li>
<li><p>åœ¨ç³»ç»Ÿè¿è¡ŒæœŸé—´å¯åŠ¨ã€åœæ­¢æˆ–é‡å¯æœåŠ¡ï¼›</p>
</li>
<li><p>ç®¡ç†æœåŠ¡çš„ä¾èµ–å…³ç³»ã€æ—¥å¿—ã€æƒé™å’ŒçŠ¶æ€ã€‚</p>
</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼Œå®ƒæ˜¯ Linux å¯åŠ¨å’Œåå°æœåŠ¡ç®¡ç†çš„æ ¸å¿ƒå·¥å…·ã€‚<br><code>PostgreSQL</code> åœ¨ç°ä»£ <code>Linux </code>å‘è¡Œç‰ˆï¼ˆå¦‚ Ubuntuã€CentOSã€Fedora ç­‰ï¼‰ä¸­ï¼Œé€šå¸¸ä½œä¸ºä¸€ä¸ª<code> systemd æœåŠ¡å•å…ƒ</code>ï¼ˆsystemd unitï¼‰ æ¥ç®¡ç†ã€‚</p>
<p><strong>ä½¿ç”¨ systemd ç®¡ç† PostgreSQL çš„å¸¸è§å‘½ä»¤</strong></p>
<table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>å¯åŠ¨ PostgreSQL</td>
<td><code>sudo systemctl start postgresql</code></td>
<td>å¯åŠ¨æ•°æ®åº“æœåŠ¡</td>
</tr>
<tr>
<td>åœæ­¢ PostgreSQL</td>
<td><code>sudo systemctl stop postgresql</code></td>
<td>å®‰å…¨åœæ­¢æ•°æ®åº“</td>
</tr>
<tr>
<td>é‡å¯ PostgreSQL</td>
<td><code>sudo systemctl restart postgresql</code></td>
<td>é‡å¯æ•°æ®åº“æœåŠ¡</td>
</tr>
<tr>
<td>æŸ¥çœ‹çŠ¶æ€</td>
<td><code>sudo systemctl status postgresql</code></td>
<td>æŸ¥çœ‹ PostgreSQL å½“å‰è¿è¡ŒçŠ¶æ€</td>
</tr>
<tr>
<td>è®¾ç½®å¼€æœºè‡ªå¯</td>
<td><code>sudo systemctl enable postgresql</code></td>
<td>åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨ PostgreSQL</td>
</tr>
<tr>
<td>å–æ¶ˆå¼€æœºè‡ªå¯</td>
<td><code>sudo systemctl disable postgresql</code></td>
<td>ç¦æ­¢å¼€æœºè‡ªåŠ¨å¯åŠ¨ PostgreSQL</td>
</tr>
<tr>
<td>æŸ¥çœ‹æ—¥å¿—</td>
<td><code>journalctl -u postgresql</code></td>
<td>æŸ¥çœ‹ PostgreSQL çš„ systemd ç®¡ç†æ—¥å¿—</td>
</tr>
</tbody></table>
<h2 id="pg-ctlcluster"><a href="#pg-ctlcluster" class="headerlink" title="pg_ctlcluster"></a>pg_ctlcluster</h2><p><code>pg_ctlcluster</code> æ˜¯ Ubuntu &#x2F; Debian ä¸“å±çš„ PostgreSQL ç®¡ç†å‘½ä»¤ï¼Œ<br>ç”±å®˜æ–¹çš„ PostgreSQL APT åŒ…ï¼ˆpostgresql-commonï¼‰æä¾›ï¼Œç”¨äºï¼š</p>
<ul>
<li><p>ç®¡ç† <strong>ä¸åŒç‰ˆæœ¬ çš„ PostgreSQL</strong>ï¼›</p>
</li>
<li><p>ç®¡ç† <strong>åŒä¸€ç‰ˆæœ¬çš„å¤šä¸ªé›†ç¾¤ï¼ˆclusterï¼‰</strong>ã€‚</p>
</li>
</ul>
<blockquote>
<p>ä¸€ä¸ª<strong>clusterï¼ˆé›†ç¾¤ï¼‰</strong> &#x3D; ä¸€ä¸ª PostgreSQL æœåŠ¡å™¨è¿›ç¨‹ï¼ˆpostmasterï¼‰ + ä¸€ç»„æ•°æ®åº“ + ä¸€ä¸ªç‹¬ç«‹çš„æ•°æ®ç›®å½•ã€‚</p>
</blockquote>
<table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>å¯åŠ¨é›†ç¾¤</td>
<td><code>sudo pg_ctlcluster 16 main start</code></td>
<td>å¯åŠ¨ PostgreSQL 16 çš„ <code>main</code> é›†ç¾¤</td>
</tr>
<tr>
<td>åœæ­¢é›†ç¾¤</td>
<td><code>sudo pg_ctlcluster 16 main stop</code></td>
<td>åœæ­¢ PostgreSQL 16 çš„ <code>main</code> é›†ç¾¤</td>
</tr>
<tr>
<td>é‡å¯é›†ç¾¤</td>
<td><code>sudo pg_ctlcluster 16 main restart</code></td>
<td>é‡å¯ PostgreSQL 16 çš„ <code>main</code> é›†ç¾¤</td>
</tr>
<tr>
<td>æŸ¥çœ‹çŠ¶æ€</td>
<td><code>sudo pg_ctlcluster 16 main status</code></td>
<td>æŸ¥çœ‹ PostgreSQL 16 <code>main</code> é›†ç¾¤çš„è¿è¡ŒçŠ¶æ€</td>
</tr>
<tr>
<td>æ£€æŸ¥é…ç½®</td>
<td><code>sudo pg_ctlcluster 16 main reload</code></td>
<td>é‡æ–°åŠ è½½é…ç½®ï¼ˆä¸é‡å¯ï¼‰</td>
</tr>
</tbody></table>
<h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><p>ä½¿ç”¨<code>\l</code>å‘½ä»¤æ—¶å¯ä»¥çœ‹åˆ°æ­¤æ—¶æœ‰<code>postgres</code>,<code>tmplate1</code>å’Œ<code>template0</code>è¿™ä¸‰ä¸ªé¢å¤–çš„æ•°æ®åº“<br>ç¬¬ä¸€ä¸ªæ•°æ®åº“æ€»æ˜¯åœ¨åˆå§‹åŒ–æ•°æ®å­˜å‚¨åŒºåŸŸæ—¶åˆ›å»ºçš„ã€‚è¿™ä¸ªæ•°æ®åº“è¢«ç§°ä¸º<code>postgres</code>ã€‚å› æ­¤è¦åˆ›å»ºç¬¬ä¸€ä¸ªâ€œæ™®é€šâ€æ•°æ®åº“æ—¶ï¼Œä½ å¯ä»¥è¿æ¥åˆ°<code>postgres</code>ã€‚</p>
<p>åœ¨é›†ç°‡åˆå§‹åŒ–æœŸé—´è¿˜ä¼šåˆ›å»ºä¸¤ä¸ªé¢å¤–çš„æ•°æ®åº“ï¼Œ <code>template1</code> å’Œ <code>template0</code>ï¼Œ ã€‚æ¯å½“åœ¨é›†ç°‡ä¸­åˆ›å»ºæ–°æ•°æ®åº“æ—¶ï¼Œå®é™…ä¸Šæ˜¯å…‹éš†äº†<code>template1</code>ã€‚ è¿™æ„å‘³ç€æ‚¨åœ¨template1ä¸­æ‰€åšçš„ä»»ä½•æ›´æ”¹éƒ½ä¼šä¼ æ’­åˆ°éšååˆ›å»ºçš„æ‰€æœ‰æ•°æ®åº“ä¸­ã€‚æ‰€ä»¥è¯¥æ•°æ®åº“æ˜¯åˆ›å»ºæ–°æ•°æ®åº“çš„â€œæ¨¡æ¿â€ã€‚ å¦‚æœä½ ä¸ºtemplate1æ•°æ®åº“å¢åŠ å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡å°†è¢«æ‹·è´åˆ°åç»­åˆ›å»ºçš„ç”¨æˆ·æ•°æ®åº“ä¸­ã€‚ è¿™ç§è¡Œä¸ºå…è®¸å¯¹æ•°æ®åº“ä¸­æ ‡å‡†å¯¹è±¡é›†åˆçš„ç«™ç‚¹æœ¬åœ°ä¿®æ”¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æŠŠè¿‡ç¨‹è¯­è¨€PL&#x2F;Perlå®‰è£…åˆ° template1ä¸­ï¼Œé‚£ä¹ˆä½ åœ¨åˆ›å»ºç”¨æˆ·æ•°æ®åº“åä¸éœ€è¦é¢å¤–çš„æ“ä½œå°±å¯ä»¥ä½¿ç”¨è¯¥è¯­è¨€ã€‚ å› æ­¤ï¼Œé™¤éæ‚¨å¸Œæœ›è¿™äº›æ›´æ”¹ä¼ æ’­åˆ°æ¯ä¸ªæ–°åˆ›å»ºçš„æ•°æ®åº“ä¸­ï¼Œå¦åˆ™åº”é¿å…åœ¨<code>template</code>1ä¸­åˆ›å»ºå¯¹è±¡ã€‚</p>
<p>ç³»ç»Ÿé‡Œè¿˜æœ‰åä¸º<code>template0</code>çš„ç¬¬äºŒä¸ªæ ‡å‡†ç³»ç»Ÿæ•°æ®åº“ã€‚ è¿™ä¸ªæ•°æ®åº“åŒ…å«å’Œ<code>template1</code>åˆå§‹å†…å®¹ä¸€æ ·çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåªåŒ…å«ä½ çš„PostgreSQLç‰ˆæœ¬é¢„å®šä¹‰çš„æ ‡å‡†å¯¹è±¡ã€‚ åœ¨æ•°æ®åº“é›†ç°‡è¢«åˆå§‹åŒ–ä¹‹åï¼Œä¸åº”è¯¥å¯¹<code>template0</code>åšä»»ä½•ä¿®æ”¹ã€‚ é€šè¿‡æŒ‡ç¤º<code>CREATE DATABASE</code>ä½¿ç”¨<code>template0</code>å–ä»£<code>template1</code>è¿›è¡Œæ‹·è´ï¼Œ ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªâ€œåŸå§‹çš„â€ç”¨æˆ·æ•°æ®åº“,å®ƒä¸ä¼šåŒ…å«ä»»ä½•<code>template1</code>ä¸­çš„ç«™ç‚¹æœ¬åœ°é™„åŠ ç‰©ã€‚<br>è¦é€šè¿‡æ‹·è´template0æ¥åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œä½¿ç”¨ï¼šSQL ç¯å¢ƒä¸­çš„</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE dbname TEMPLATE template0;</span><br></pre></td></tr></table></figure>
<p>æˆ–è€… shell ä¸­çš„</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">createdb -T template0 dbname</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ³•"><a href="#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ³•" class="headerlink" title="å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ³•"></a>å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ³•</h2><ul>
<li><p><strong>ICU library not found</strong><br>è§£å†³åŠæ³•ï¼šæ‰§è¡Œ <code>sudo apt install libicu-dev pkg-config</code>ï¼Œç„¶åé‡æ–°è¿è¡Œ <code>configure</code>ã€‚æˆ–è€…åœ¨ <code>configure</code> æ—¶åŠ  <code>--without-icu</code>ã€‚</p>
</li>
<li><p><strong>Permission denied &#x2F; æ— æ³• touch &#x2F; å†™æ–‡ä»¶é”™è¯¯</strong><br>è§£å†³åŠæ³•ï¼šä½¿ç”¨ <code>sudo</code> æ‰§è¡Œï¼Œæˆ–è€…ä¿®æ”¹æºç ç›®å½•å±ä¸» &#x2F; æƒé™ï¼ˆæ¨èå°†ç›®å½•å±ä¸»ä¿®æ”¹ä¸ºå½“å‰ç”¨æˆ·ï¼‰ã€‚</p>
</li>
<li><p><strong><code>make check</code> æœ‰éƒ¨åˆ†æµ‹è¯•å¤±è´¥</strong><br>åœ¨å­¦ä¹ ç¯å¢ƒä¸‹ï¼Œå¯å…ˆå¿½ç•¥éƒ¨åˆ†éå…³é”®å¤±è´¥ï¼Œä½†è¦é‡ç‚¹å…³æ³¨æ ¸å¿ƒæ¨¡å—æ˜¯å¦é€šè¿‡ã€‚ä¹‹åå¯æ ¹æ®æµ‹è¯•æ—¥å¿—ä¿®å¤ã€‚</p>
</li>
<li><p><strong>ä¿®æ”¹é…ç½® &#x2F; é‡æ–°åš <code>configure</code> æ— æ•ˆ</strong><br>è‹¥æ›´æ”¹ <code>configure</code> é€‰é¡¹æˆ–ä¾èµ–åæ„å»ºä¸ç”Ÿæ•ˆï¼Œå»ºè®®å…ˆæ‰§è¡Œ <code>make distclean</code> æ¸…é™¤æ—§çš„æ„å»ºäº§ç‰©ï¼Œç„¶åé‡æ–° <code>./configure</code> + <code>make</code>ã€‚</p>
</li>
<li><p><strong>pg_ctl startã€createdb mydbã€psql mydb è¿™ä¸‰ä¸ªå‘½ä»¤çš„å…³ç³»</strong></p>
</li>
</ul>
<ol>
<li><p>pg_ctl -l &#x2F;usr&#x2F;local&#x2F;pgsql&#x2F;data&#x2F;logfile start<br>ä½œç”¨ï¼šå¯åŠ¨ PostgreSQL æœåŠ¡å™¨è¿›ç¨‹ï¼ˆåå°å®ˆæŠ¤è¿›ç¨‹ï¼‰ã€‚</p>
</li>
<li><p>createdb mydb<br>ä½œç”¨ï¼šåœ¨ å·²ç»è¿è¡Œçš„æ•°æ®åº“æœåŠ¡ é‡Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“ mydbã€‚</p>
</li>
<li><p>psql mydb<br>ä½œç”¨ï¼šç”¨å®¢æˆ·ç«¯ psql è¿æ¥åˆ° mydb æ•°æ®åº“ï¼Œè¿›å…¥äº¤äº’å¼ SQL å‘½ä»¤è¡Œã€‚</p>
</li>
</ol>
<p>æ‰€ä»¥ é¡ºåºå…³ç³»å°±æ˜¯ï¼š<br><code>ğŸ‘‰ å¯åŠ¨æ•°æ®åº“æœåŠ¡ â†’ åˆ›å»ºæ•°æ®åº“ â†’ è¿›å…¥æ•°æ®åº“æ‰§è¡Œ SQL</code></p>
<hr>
<p>end</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DBA/" rel="tag">DBA</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Postgre/" rel="tag">Postgre</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2025/10/01/SQL%E5%9F%BA%E7%A1%80/" class="article-nav-link">
        <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
        <div class="article-nav-title">
          
            SQLåŸºç¡€
          
        </div>
      </a>
    
    
      <a href="/2025/08/15/ViewModel/" class="article-nav-link">
        <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
        <div class="article-nav-title">ViewModel</div>
      </a>
    
  </nav>

  
   
  
   
    <script src="https://cdn.staticfile.org/twikoo/1.4.18/twikoo.all.min.js"></script>
    <div id="twikoo" class="twikoo"></div>
    <script>
        twikoo.init({
            envId: ""
        })
    </script>
 
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2023-2025
        <i class="ri-heart-fill heart_icon"></i> Hexo
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzzç»Ÿè®¡ -->
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/smile-circle-side.svg" alt="24stage"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">ä¸»é¡µ</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">å½’æ¡£</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">åˆ†ç±»</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">æ ‡ç­¾</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2023/about">å…³äºæˆ‘</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>è¯·æˆ‘å–æ¯å’–å•¡å§~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">æ”¯ä»˜å®</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">å¾®ä¿¡</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // sliderå±•å¼€çŠ¶æ€
                // todo: è¿™æ ·ä¸å¥½ï¼Œåé¢æ”¹æˆçŠ¶æ€
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // è·å¾—åŸå›¾å°ºå¯¸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->

<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // ç­‰å¾…ä¸¤ç§’é’Ÿåæ¢å¤
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>